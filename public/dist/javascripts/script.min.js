!function(e,t,a,n,c,o,s){e.GoogleAnalyticsObject=c,e[c]=e[c]||function(){(e[c].q=e[c].q||[]).push(arguments)},e[c].l=1*new Date,o=t.createElement(a),s=t.getElementsByTagName(a)[0],o.async=1,o.src=n,s.parentNode.insertBefore(o,s)}(window,document,"script","https://www.google-analytics.com/analytics.js","ga"),ga("create","UA-89197712-1","auto"),ga("send","pageview");
"use strict";angular.module("XSSAngularApp",["templates"]).controller("MainCtrl",["$scope","$http","$compile","$timeout","$templateCache","$sce","$window","$interval","ResizeAndScrollService",function(e,t,a,n,c,l,i,o,r){var d=new r(e);i.hackMessage="You have been hacked!",e.hackScriptText='<script type="text/javascript">alert("You have been hacked!"); document.body.firstElementChild.className = 1;</script>',e.hackSandBoxText="{{(_=''.sub).call.call({}[$='constructor'].getOwnPropertyDescriptor(_.__proto__,$).value,0,'alert(hackMessage); document.body.firstElementChild.className = 1')()}}",e.scrolledToPrevious=!1,e.intervals=[],e.sharedDynamicData={interpolationText:"",constructionText:"",constructCompiled:"",ngIncludeText:"",ngIncludeCompiled:"",ngBindHtmlText:"",ngBindHtmlFull:"",statusMessage:"",isDangerous:!1,loadedDB:!1,hacked:!1},t.get("/getDB").then(function(t){var a=t.data;for(var n in a)e.sharedDynamicData[n]=a[n];c.put("htmlContentUrl",'<div id="'+e.sharedDynamicData.ngIncludeText+'"></div>'),e.sharedDynamicData.loadedDB=!0}),e.cleanDBPlusRefresh=function(){t.post("/cleanDB").then(function(){i.location.reload()})},e.onNgIncludeComplete=function(){e.sharedDynamicData.ngIncludeCompiled=angular.element("#ng-include-without-interpolation .compiled")[0].innerHTML},e.createElement=function(){var t=document.createElement("div");t.className=e.sharedDynamicData.constructionText,angular.element("#construction-text-container").append(t),a(t)(e),e.sharedDynamicData.hacked=e.sharedDynamicData.constructionText===e.hackSandBoxText,e.sharedDynamicData.constructCompiled=t.outerHTML},e.startTimer=function(){angular.forEach(e.intervals,function(e){o.cancel(interval)}),e.intervals.splice(0);var t=o(function(){e.sharedDynamicData.statusMessage="",o.cancel(t)},5e3);e.intervals.push(t)},e.$watchCollection("sharedDynamicData",function(t,a){t.ngBindHtmlText===a.ngBindHtmlText&&t.ngBindHtmlFull||(e.sharedDynamicData.ngBindHtmlFull=l.trustAsHtml('<div id="'+t.ngBindHtmlText+'"></div>')),e.scrolledToPrevious||t.ngIncludeCompiled&&t.ngBindHtmlFull&&n(function(){e.sharedDynamicData.hacked="1"===document.getElementById("dummy-hacked-indicator").className,d.scrollToLastScrollTop(),e.scrolledToPrevious=!0})}),d.bindScrollHander(),d.bindResizeHandlerAndExecute()}]);
"use strict";angular.module("XSSAngularApp").controller("OneInputTwoButtonsCtrl",["$scope","$http",function(t,e){var n=function(){var n={key:t.inputTextKey,value:t.inputTextModel};e.post("/modifyDB",n).then(function(){var e=t.inputTextModel===t.hackInputText;t.isSafe?t.isDangerous=!1:t.isDangerous=e;var n=e?t.textSameHackLabel:t.textDifferentHackLabel;t.statusMessage=n,t.startTimer()})};t.populateInputText=function(){t.inputTextModel=t.hackInputText},t.submitTextFields=t.isInherited?t.inheritedSubmitFn:n}]).directive("oneInputTwoButtons",function(){return{templateUrl:"/templates/one-input-two-buttons-template.ejs",restrict:"E",controller:"OneInputTwoButtonsCtrl",scope:{inputTextKey:"@",inputTextModel:"=",hackInputText:"=",populateButtonLabel:"@",submitButtonLabel:"@",statusMessage:"=",isDangerous:"=",isSafe:"=",textSameHackLabel:"@",textDifferentHackLabel:"@",isInherited:"=",inheritedSubmitFn:"&",startTimer:"&"}}});
"use strict";angular.module("XSSAngularApp").directive("safeCircle",function(){return{template:'<i class="fa fa-check-circle" aria-hidden="true" style="color: green;"></i>',restrict:"E"}}).directive("dangerCircle",function(){return{template:'<i class="fa fa-times-circle" aria-hidden="true" style="color: red;"></i>',restrict:"E"}});
"use strict";angular.module("XSSAngularApp").factory("ResizeAndScrollService",["$window",function(e){var n=function(e){this._scope=e};return n.prototype={_scrollKey:"XSSAngularScrollTop",_getDynamicAnimatedElements:function(){var e=document.getElementById("main-title-header"),n=document.getElementById("documentation-container"),t=[e,n];return angular.element(t)},_resizeHandler:function(){var e=document.getElementById("dummy-size-indicator");this._scope.isMobile="none"===angular.element(e).css("display"),this._getDynamicAnimatedElements().toggleClass("animate-hidden",this._scope.isMobile),angular.element("body").toggleClass("is-mobile",this._scope.isMobile)},_scrollHandler:function(){var n=angular.element("#documentation-container").scrollTop();e.sessionStorage.setItem(this._scrollKey,n),this._scope.isMobile&&this._getDynamicAnimatedElements().toggleClass("animate-hidden",n>60)},bindResizeHandlerAndExecute:function(){angular.element(e).bind("resize",this._resizeHandler.bind(this)),this._resizeHandler()},bindScrollHander:function(){angular.element("#documentation-container").bind("scroll",this._scrollHandler.bind(this))},scrollToLastScrollTop:function(){var n=e.sessionStorage.getItem(this._scrollKey);angular.element("#documentation-container").scrollTop(n)}},n}]);